<!doctype html><html lang="zh-CN"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="generator" content="VuePress 2.0.0-rc.19" /><meta name="theme" content="VuePress Theme Plume " /><script id="check-mac-os">document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><script id="check-dark-mode">;(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = um === 'dark' || (um !== 'light' && sm);document.documentElement.dataset.theme = isDark ? 'dark' : 'light';})();</script><title>第3章 数据模型与查询语言 | My Vuepress Site</title><meta name="description" content=""><link rel="preload" href="/henry.github.io/assets/style-iCC0LYON.css" as="style"><link rel="stylesheet" href="/henry.github.io/assets/style-iCC0LYON.css"><link rel="modulepreload" href="/henry.github.io/assets/app-BNwF3TyR.js"><link rel="modulepreload" href="/henry.github.io/assets/index.html-f8VL-Xxk.js"></head><body><div id="app"><!--[--><!--[--><div class="theme-plume vp-layout" vp-container data-v-6b855051><!--[--><!--[--><!--]--><!--[--><span tabindex="-1" data-v-6665853b></span><a href="#VPContent" class="vp-skip-link visually-hidden" data-v-6665853b> Skip to content </a><!--]--><!----><header class="vp-nav" data-v-6b855051 data-v-b27f9974><div class="vp-navbar" vp-navbar data-v-b27f9974 data-v-bd857425><div class="wrapper" data-v-bd857425><div class="container" data-v-bd857425><div class="title" data-v-bd857425><div class="vp-navbar-title has-sidebar" data-v-bd857425 data-v-2ef7f17a><a class="vp-link no-icon link title" href="/henry.github.io/" data-v-2ef7f17a data-v-87b5717a><!--[--><!--[--><!--]--><!--[--><!--[--><!--[--><img class="vp-image dark logo" src="https://theme-plume.vuejs.press/plume.png" alt data-v-e3c54c70><!--]--><!--[--><img class="vp-image light logo" src="https://theme-plume.vuejs.press/plume.png" alt data-v-e3c54c70><!--]--><!--]--><!--]--><span data-v-2ef7f17a>My Vuepress Site</span><!--[--><!--]--><!--]--><!----></a></div></div><div class="content" data-v-bd857425><div class="content-body" data-v-bd857425><!--[--><!--]--><div class="vp-navbar-search search" data-v-bd857425><div class="search-wrapper" data-v-42ff2bf3><!----><div id="local-search" data-v-42ff2bf3><button type="button" class="mini-search mini-search-button" aria-label="搜索文档" data-v-42ff2bf3><span class="mini-search-button-container"><svg class="mini-search-search-icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="mini-search-button-placeholder">搜索文档</span></span><span class="mini-search-button-keys"><kbd class="mini-search-button-key"></kbd><kbd class="mini-search-button-key">K</kbd></span></button></div></div></div><nav aria-labelledby="main-nav-aria-label" class="vp-navbar-menu menu" data-v-bd857425 data-v-6d8fb5f6><span id="main-nav-aria-label" class="visually-hidden" data-v-6d8fb5f6>Main Navigation</span><!--[--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/henry.github.io/" tabindex="0" data-v-6d8fb5f6 data-v-ac70cb14 data-v-87b5717a><!--[--><!----><span data-v-ac70cb14>首页</span><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/henry.github.io/blog/" tabindex="0" data-v-6d8fb5f6 data-v-ac70cb14 data-v-87b5717a><!--[--><!----><span data-v-ac70cb14>博客</span><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/henry.github.io/blog/tags/" tabindex="0" data-v-6d8fb5f6 data-v-ac70cb14 data-v-87b5717a><!--[--><!----><span data-v-ac70cb14>标签</span><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/henry.github.io/blog/archives/" tabindex="0" data-v-6d8fb5f6 data-v-ac70cb14 data-v-87b5717a><!--[--><!----><span data-v-ac70cb14>归档</span><!--]--><!----></a><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-6d8fb5f6 data-v-f5157cbd><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-f5157cbd><span class="text" data-v-f5157cbd><!----><!----><span data-v-f5157cbd>笔记</span><span class="vpi-chevron-down text-icon" data-v-f5157cbd></span></span></button><div class="menu" data-v-f5157cbd><div class="vp-menu" data-v-f5157cbd data-v-22b26cbd><div class="items" data-v-22b26cbd><!--[--><!--[--><div class="vp-menu-link" data-v-22b26cbd data-v-d5eb0fee><a class="vp-link no-icon link" href="/henry.github.io/android/" data-v-d5eb0fee data-v-87b5717a><!--[--><!----> Android<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-22b26cbd data-v-d5eb0fee><a class="vp-link no-icon link" href="/henry.github.io/ddia/" data-v-d5eb0fee data-v-87b5717a><!--[--><!----> DDIA 学习笔记<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-22b26cbd data-v-d5eb0fee><a class="vp-link no-icon link" href="/henry.github.io/demo/" data-v-d5eb0fee data-v-87b5717a><!--[--><!----> Demo<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-22b26cbd data-v-d5eb0fee><a class="vp-link no-icon link" href="/henry.github.io/flutter/" data-v-d5eb0fee data-v-87b5717a><!--[--><!----> Flutter<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-22b26cbd data-v-d5eb0fee><a class="vp-link no-icon link" href="/henry.github.io/ui/" data-v-d5eb0fee data-v-87b5717a><!--[--><!----> Ui<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><div class="vp-flyout vp-navbar-translations translations" data-v-bd857425 data-v-0ffcc6de data-v-f5157cbd><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="选择语言" data-v-f5157cbd><span class="text" data-v-f5157cbd><!----><span class="vpi-languages option-icon" data-v-f5157cbd></span><!----><span class="vpi-chevron-down text-icon" data-v-f5157cbd></span></span></button><div class="menu" data-v-f5157cbd><div class="vp-menu" data-v-f5157cbd data-v-22b26cbd><!----><!--[--><!--[--><div class="items" data-v-0ffcc6de><p class="title" data-v-0ffcc6de>简体中文</p><!--[--><div class="vp-menu-link" data-v-0ffcc6de data-v-d5eb0fee><a class="vp-link no-icon link" href="/henry.github.io/en/" data-v-d5eb0fee data-v-87b5717a><!--[--><!----> English<!--]--><!----></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="vp-navbar-appearance appearance" data-v-bd857425 data-v-d9c55eda><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-d9c55eda data-v-ad1b2bdf data-v-61405998><span class="check" data-v-61405998><span class="icon" data-v-61405998><!--[--><span class="vpi-sun sun" data-v-ad1b2bdf></span><span class="vpi-moon moon" data-v-ad1b2bdf></span><!--]--></span></span></button></div><div class="vp-social-links vp-navbar-social-links social-links" data-v-bd857425 data-v-26cdeb54 data-v-03411773><!--[--><a class="vp-social-link no-icon" href="/" aria-label="github" target="_blank" rel="noopener" data-v-03411773 data-v-4463c1f8><span class="vpi-social-github" /></a><!--]--></div><div class="vp-flyout vp-navbar-extra extra" data-v-bd857425 data-v-ff262915 data-v-f5157cbd><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-f5157cbd><span class="vpi-more-horizontal icon" data-v-f5157cbd></span></button><div class="menu" data-v-f5157cbd><div class="vp-menu" data-v-f5157cbd data-v-22b26cbd><!----><!--[--><!--[--><div class="group translations" data-v-ff262915><p class="trans-title" data-v-ff262915>简体中文</p><!--[--><div class="vp-menu-link" data-v-ff262915 data-v-d5eb0fee><a class="vp-link no-icon link" href="/henry.github.io/en/" data-v-d5eb0fee data-v-87b5717a><!--[--><!----> English<!--]--><!----></a></div><!--]--></div><div class="group" data-v-ff262915><div class="item appearance" data-v-ff262915><p class="label" data-v-ff262915>外观</p><div class="appearance-action" data-v-ff262915><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-ff262915 data-v-ad1b2bdf data-v-61405998><span class="check" data-v-61405998><span class="icon" data-v-61405998><!--[--><span class="vpi-sun sun" data-v-ad1b2bdf></span><span class="vpi-moon moon" data-v-ad1b2bdf></span><!--]--></span></span></button></div></div></div><div class="group" data-v-ff262915><div class="item social-links" data-v-ff262915><div class="vp-social-links social-links-list" data-v-ff262915 data-v-03411773><!--[--><a class="vp-social-link no-icon" href="/" aria-label="github" target="_blank" rel="noopener" data-v-03411773 data-v-4463c1f8><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="vp-navbar-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="nav-screen" data-v-bd857425 data-v-bc2fdff4><span class="container" data-v-bc2fdff4><span class="top" data-v-bc2fdff4></span><span class="middle" data-v-bc2fdff4></span><span class="bottom" data-v-bc2fdff4></span></span></button></div></div></div></div><div class="divider" data-v-bd857425><div class="divider-line" data-v-bd857425></div></div></div><!----></header><div class="vp-local-nav reached-top is-blog" data-v-6b855051 data-v-a9fbedc4><button class="menu" aria-expanded="false" aria-controls="SidebarNav" data-v-a9fbedc4><span class="vpi-align-left menu-icon" data-v-a9fbedc4></span><span class="menu-text" data-v-a9fbedc4>Menu</span></button><div class="vp-local-nav-outline-dropdown" style="--vp-vh:0px;" data-v-a9fbedc4 data-v-efb9a031><button data-v-efb9a031>返回顶部</button><!----></div></div><aside class="vp-sidebar" vp-sidebar data-v-6b855051 data-v-e8b1f427><div class="curtain" data-v-e8b1f427></div><nav id="SidebarNav" class="nav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-e8b1f427><span id="sidebar-aria-label" class="visually-hidden" data-v-e8b1f427> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c7d7fce2><section class="vp-sidebar-item sidebar-item level-0 collapsible is-link has-active" data-v-c7d7fce2 data-v-13ba94ca><div class="item" tabindex="0" data-v-13ba94ca><div class="indicator" data-v-13ba94ca></div><!----><a class="vp-link no-icon link link" href="/henry.github.io/ddia/7x9vynpy/" data-v-13ba94ca data-v-87b5717a><!--[--><h2 class="text" data-v-13ba94ca>part1-foundations</h2><!--]--><!----></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-13ba94ca><span class="vpi-chevron-right caret-icon" data-v-13ba94ca></span></div></div><div class="items" data-v-13ba94ca><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-13ba94ca data-v-13ba94ca><div class="item" data-v-13ba94ca><div class="indicator" data-v-13ba94ca></div><!----><a class="vp-link no-icon link link" href="/henry.github.io/ddia/670y7cuq/" data-v-13ba94ca data-v-87b5717a><!--[--><p class="text" data-v-13ba94ca>第1章 可靠性、可扩展性与可维护性</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-13ba94ca data-v-13ba94ca><div class="item" data-v-13ba94ca><div class="indicator" data-v-13ba94ca></div><!----><a class="vp-link no-icon link link" href="/henry.github.io/ddia/ia4ww5f0/" data-v-13ba94ca data-v-87b5717a><!--[--><p class="text" data-v-13ba94ca>第2章 定义非功能性需求</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-13ba94ca data-v-13ba94ca><div class="item" data-v-13ba94ca><div class="indicator" data-v-13ba94ca></div><!----><a class="vp-link no-icon link link" href="/henry.github.io/ddia/vva8j2cd/" data-v-13ba94ca data-v-87b5717a><!--[--><p class="text" data-v-13ba94ca>第3章 数据模型与查询语言</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-13ba94ca data-v-13ba94ca><div class="item" data-v-13ba94ca><div class="indicator" data-v-13ba94ca></div><!----><a class="vp-link no-icon link link" href="/henry.github.io/ddia/qoji05j0/" data-v-13ba94ca data-v-87b5717a><!--[--><p class="text" data-v-13ba94ca>第4章 存储与检索</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-13ba94ca data-v-13ba94ca><div class="item" data-v-13ba94ca><div class="indicator" data-v-13ba94ca></div><!----><a class="vp-link no-icon link link" href="/henry.github.io/ddia/dxwd3178/" data-v-13ba94ca data-v-87b5717a><!--[--><p class="text" data-v-13ba94ca>第5章 编码与演化</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c7d7fce2><section class="vp-sidebar-item sidebar-item level-0 collapsible is-link" data-v-c7d7fce2 data-v-13ba94ca><div class="item" tabindex="0" data-v-13ba94ca><div class="indicator" data-v-13ba94ca></div><!----><a class="vp-link no-icon link link" href="/henry.github.io/ddia/499k0udf/" data-v-13ba94ca data-v-87b5717a><!--[--><h2 class="text" data-v-13ba94ca>part2-distributed</h2><!--]--><!----></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-13ba94ca><span class="vpi-chevron-right caret-icon" data-v-13ba94ca></span></div></div><div class="items" data-v-13ba94ca><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-13ba94ca data-v-13ba94ca><div class="item" data-v-13ba94ca><div class="indicator" data-v-13ba94ca></div><!----><a class="vp-link no-icon link link" href="/henry.github.io/ddia/part2-distributed/chapter-06/" data-v-13ba94ca data-v-87b5717a><!--[--><p class="text" data-v-13ba94ca>第6章 复制</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-13ba94ca data-v-13ba94ca><div class="item" data-v-13ba94ca><div class="indicator" data-v-13ba94ca></div><!----><a class="vp-link no-icon link link" href="/henry.github.io/ddia/bxqsc20o/" data-v-13ba94ca data-v-87b5717a><!--[--><p class="text" data-v-13ba94ca>第7章 分区</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-13ba94ca data-v-13ba94ca><div class="item" data-v-13ba94ca><div class="indicator" data-v-13ba94ca></div><!----><a class="vp-link no-icon link link" href="/henry.github.io/ddia/fm1ruuoh/" data-v-13ba94ca data-v-87b5717a><!--[--><p class="text" data-v-13ba94ca>第8章 事务</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-13ba94ca data-v-13ba94ca><div class="item" data-v-13ba94ca><div class="indicator" data-v-13ba94ca></div><!----><a class="vp-link no-icon link link" href="/henry.github.io/ddia/cpolrctq/" data-v-13ba94ca data-v-87b5717a><!--[--><p class="text" data-v-13ba94ca>第9章 分布式系统的麻烦</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-13ba94ca data-v-13ba94ca><div class="item" data-v-13ba94ca><div class="indicator" data-v-13ba94ca></div><!----><a class="vp-link no-icon link link" href="/henry.github.io/ddia/nydpoapn/" data-v-13ba94ca data-v-87b5717a><!--[--><p class="text" data-v-13ba94ca>第10章 一致性与共识</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><!--[--><div id="VPContent" vp-content class="vp-content has-sidebar" data-v-6b855051 data-v-6d75db73><div class="has-sidebar has-aside vp-doc-container" data-v-94616537><!--[--><!--]--><div class="container" data-v-94616537><div class="aside" vp-outline data-v-94616537><div class="aside-curtain" data-v-94616537></div><div class="aside-container" data-v-94616537><div class="aside-content" data-v-94616537><div class="vp-doc-aside" data-v-94616537 data-v-c5a5865a><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="vp-doc-aside-outline" role="navigation" data-v-c5a5865a data-v-2d954bbe><div class="content" data-v-2d954bbe><div class="outline-marker" data-v-2d954bbe></div><div id="doc-outline-aria-label" aria-level="2" class="outline-title" role="heading" data-v-2d954bbe><span data-v-2d954bbe>此页内容</span><span class="vpi-print icon" data-v-2d954bbe></span></div><ul class="root" data-v-2d954bbe data-v-a404a7d7><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-c5a5865a></div><!--[--><!--]--></div></div></div></div><div class="content" data-v-94616537><div class="content-container" data-v-94616537><!--[--><!--]--><main class="main" data-v-94616537><nav class="vp-breadcrumb" data-v-94616537 data-v-5efe8592><ol vocab="https://schema.org/" typeof="BreadcrumbList" data-v-5efe8592><!--[--><li property="itemListElement" typeof="ListItem" data-v-5efe8592><a class="vp-link no-icon link breadcrumb" href="/henry.github.io/" property="item" typeof="WebPage" data-v-5efe8592 data-v-87b5717a><!--[-->首页<!--]--><!----></a><span class="vpi-chevron-right" data-v-5efe8592></span><meta property="name" content="首页" data-v-5efe8592><meta property="position" content="1" data-v-5efe8592></li><li property="itemListElement" typeof="ListItem" data-v-5efe8592><a class="vp-link no-icon link breadcrumb" href="/henry.github.io/ddia/7x9vynpy/" property="item" typeof="WebPage" data-v-5efe8592 data-v-87b5717a><!--[-->part1-foundations<!--]--><!----></a><span class="vpi-chevron-right" data-v-5efe8592></span><meta property="name" content="part1-foundations" data-v-5efe8592><meta property="position" content="2" data-v-5efe8592></li><li property="itemListElement" typeof="ListItem" data-v-5efe8592><a class="vp-link no-icon link breadcrumb current" href="/henry.github.io/ddia/vva8j2cd/" property="item" typeof="WebPage" data-v-5efe8592 data-v-87b5717a><!--[-->第3章 数据模型与查询语言<!--]--><!----></a><!----><meta property="name" content="第3章 数据模型与查询语言" data-v-5efe8592><meta property="position" content="3" data-v-5efe8592></li><!--]--></ol></nav><!--[--><h1 class="vp-doc-title page-title" data-v-349c6f6c>第3章 数据模型与查询语言 <!----></h1><div class="vp-doc-meta" data-v-349c6f6c><p class="reading-time" data-v-349c6f6c><span class="vpi-books icon" data-v-349c6f6c></span><span data-v-349c6f6c>约 2642 字</span><span data-v-349c6f6c>大约 9 分钟</span></p><!----><p class="create-time" data-v-349c6f6c><span class="vpi-clock icon" data-v-349c6f6c></span><span data-v-349c6f6c>2025-12-26</span></p></div><!--]--><div class="_ddia_vva8j2cd_ external-link-icon-enabled vp-doc plume-content" vp-content data-v-94616537><div data-v-94616537><blockquote><p>本章基于 <a href="https://ddia.vonng.com/ch3/" target="_blank" rel="noopener noreferrer">DDIA 中文翻译</a> 整理</p></blockquote><h2 id="章节概览" tabindex="-1"><a class="header-anchor" href="#章节概览"><span>章节概览</span></a></h2><!--[--><div class="mermaid-actions"><button class="preview-button" title="preview"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1316 1024" fill="currentColor"><path d="M658.286 0C415.89 0 0 297.106 0 512c0 214.82 415.89 512 658.286 512 242.322 0 658.285-294.839 658.285-512S900.608 0 658.286 0zm0 877.714c-161.573 0-512-221.769-512-365.714 0-144.018 350.427-365.714 512-365.714 161.572 0 512 217.16 512 365.714s-350.428 365.714-512 365.714z"/><path d="M658.286 292.571a219.429 219.429 0 1 0 0 438.858 219.429 219.429 0 0 0 0-438.858zm0 292.572a73.143 73.143 0 1 1 0-146.286 73.143 73.143 0 0 1 0 146.286z"/></svg></button><button class="download-button" title="download"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" fill="currentColor"><path d="M828.976 894.125H190.189c-70.55 0-127.754-57.185-127.754-127.753V606.674c0-17.634 14.31-31.933 31.933-31.933h63.889c17.634 0 31.932 14.299 31.932 31.933v95.822c0 35.282 28.596 63.877 63.877 63.877h511.033c35.281 0 63.877-28.595 63.877-63.877v-95.822c0-17.634 14.298-31.933 31.943-31.933h63.878c17.635 0 31.933 14.299 31.933 31.933v159.7c0 70.566-57.191 127.751-127.754 127.751zM249.939 267.51c12.921-12.92 33.885-12.92 46.807 0l148.97 148.972V94.893c0-17.634 14.302-31.947 31.934-31.947h63.876c17.638 0 31.946 14.313 31.946 31.947v321.589l148.97-148.972c12.922-12.92 33.876-12.92 46.797 0l46.814 46.818c12.922 12.922 12.922 33.874 0 46.807L552.261 624.93c-1.14 1.138-21.664 13.684-42.315 13.693-20.877.01-41.88-12.542-43.021-13.693L203.122 361.135c-12.923-12.934-12.923-33.885 0-46.807l46.817-46.818z"/></svg></button></div><div class="mermaid-wrapper"><div class="loading-icon-wrapper mermaid-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!--]--><h2 id="概述" tabindex="-1"><a class="header-anchor" href="#概述"><span>概述</span></a></h2><p>数据模型是软件开发中最重要的部分，因为它们不仅影响软件的编写方式，还影响我们思考问题的方式。</p><h3 id="数据模型的抽象层次" tabindex="-1"><a class="header-anchor" href="#数据模型的抽象层次"><span>数据模型的抽象层次</span></a></h3><!--[--><div class="mermaid-actions"><button class="preview-button" title="preview"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1316 1024" fill="currentColor"><path d="M658.286 0C415.89 0 0 297.106 0 512c0 214.82 415.89 512 658.286 512 242.322 0 658.285-294.839 658.285-512S900.608 0 658.286 0zm0 877.714c-161.573 0-512-221.769-512-365.714 0-144.018 350.427-365.714 512-365.714 161.572 0 512 217.16 512 365.714s-350.428 365.714-512 365.714z"/><path d="M658.286 292.571a219.429 219.429 0 1 0 0 438.858 219.429 219.429 0 0 0 0-438.858zm0 292.572a73.143 73.143 0 1 1 0-146.286 73.143 73.143 0 0 1 0 146.286z"/></svg></button><button class="download-button" title="download"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" fill="currentColor"><path d="M828.976 894.125H190.189c-70.55 0-127.754-57.185-127.754-127.753V606.674c0-17.634 14.31-31.933 31.933-31.933h63.889c17.634 0 31.932 14.299 31.932 31.933v95.822c0 35.282 28.596 63.877 63.877 63.877h511.033c35.281 0 63.877-28.595 63.877-63.877v-95.822c0-17.634 14.298-31.933 31.943-31.933h63.878c17.635 0 31.933 14.299 31.933 31.933v159.7c0 70.566-57.191 127.751-127.754 127.751zM249.939 267.51c12.921-12.92 33.885-12.92 46.807 0l148.97 148.972V94.893c0-17.634 14.302-31.947 31.934-31.947h63.876c17.638 0 31.946 14.313 31.946 31.947v321.589l148.97-148.972c12.922-12.92 33.876-12.92 46.797 0l46.814 46.818c12.922 12.922 12.922 33.874 0 46.807L552.261 624.93c-1.14 1.138-21.664 13.684-42.315 13.693-20.877.01-41.88-12.542-43.021-13.693L203.122 361.135c-12.923-12.934-12.923-33.885 0-46.807l46.817-46.818z"/></svg></button></div><div class="mermaid-wrapper"><div class="loading-icon-wrapper mermaid-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!--]--><h2 id="关系模型-vs-文档模型" tabindex="-1"><a class="header-anchor" href="#关系模型-vs-文档模型"><span>关系模型 vs 文档模型</span></a></h2><h3 id="关系模型的特点" tabindex="-1"><a class="header-anchor" href="#关系模型的特点"><span>关系模型的特点</span></a></h3><table><thead><tr><th>特性</th><th>说明</th></tr></thead><tbody><tr><td>提出时间</td><td>1970 年（Edgar Codd）</td></tr><tr><td>核心概念</td><td>关系（表）包含元组（行）</td></tr><tr><td>主要应用</td><td>商业数据处理、事务处理、批处理</td></tr><tr><td>优势</td><td>数据一致性、强大的查询能力、成熟的生态</td></tr><tr><td>劣势</td><td>对象-关系阻抗失配</td></tr></tbody></table><h3 id="对象-关系阻抗失配" tabindex="-1"><a class="header-anchor" href="#对象-关系阻抗失配"><span>对象-关系阻抗失配</span></a></h3><p>面向对象编程与关系表之间存在不匹配：</p><!--[--><div class="mermaid-actions"><button class="preview-button" title="preview"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1316 1024" fill="currentColor"><path d="M658.286 0C415.89 0 0 297.106 0 512c0 214.82 415.89 512 658.286 512 242.322 0 658.285-294.839 658.285-512S900.608 0 658.286 0zm0 877.714c-161.573 0-512-221.769-512-365.714 0-144.018 350.427-365.714 512-365.714 161.572 0 512 217.16 512 365.714s-350.428 365.714-512 365.714z"/><path d="M658.286 292.571a219.429 219.429 0 1 0 0 438.858 219.429 219.429 0 0 0 0-438.858zm0 292.572a73.143 73.143 0 1 1 0-146.286 73.143 73.143 0 0 1 0 146.286z"/></svg></button><button class="download-button" title="download"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" fill="currentColor"><path d="M828.976 894.125H190.189c-70.55 0-127.754-57.185-127.754-127.753V606.674c0-17.634 14.31-31.933 31.933-31.933h63.889c17.634 0 31.932 14.299 31.932 31.933v95.822c0 35.282 28.596 63.877 63.877 63.877h511.033c35.281 0 63.877-28.595 63.877-63.877v-95.822c0-17.634 14.298-31.933 31.943-31.933h63.878c17.635 0 31.933 14.299 31.933 31.933v159.7c0 70.566-57.191 127.751-127.754 127.751zM249.939 267.51c12.921-12.92 33.885-12.92 46.807 0l148.97 148.972V94.893c0-17.634 14.302-31.947 31.934-31.947h63.876c17.638 0 31.946 14.313 31.946 31.947v321.589l148.97-148.972c12.922-12.92 33.876-12.92 46.797 0l46.814 46.818c12.922 12.922 12.922 33.874 0 46.807L552.261 624.93c-1.14 1.138-21.664 13.684-42.315 13.693-20.877.01-41.88-12.542-43.021-13.693L203.122 361.135c-12.923-12.934-12.923-33.885 0-46.807l46.817-46.818z"/></svg></button></div><div class="mermaid-wrapper"><div class="loading-icon-wrapper mermaid-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!--]--><p><strong>ORM 框架的局限</strong>：</p><ul><li>无法完全隐藏模型差异</li><li>可能生成低效查询（N+1 问题）</li><li>对多样化数据系统支持有限</li></ul><h3 id="文档模型的优势" tabindex="-1"><a class="header-anchor" href="#文档模型的优势"><span>文档模型的优势</span></a></h3><p>以 LinkedIn 个人资料为例：</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">  &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">user_id</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 123</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">  &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">name</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">张三</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">  &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">positions</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    {</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">company</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">A公司</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;"> &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">title</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">工程师</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;"> &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">years</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">2020-2022</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">},</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    {</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">company</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">B公司</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;"> &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">title</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">高级工程师</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;"> &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">years</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">2022-至今</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  ],</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">  &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">education</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    {</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">school</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">某大学</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;"> &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">degree</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">学士</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;"> &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">year</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2020</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  ]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>优势</strong>：</p><ul><li>更好的局部性（树形结构数据）</li><li>减少阻抗失配</li><li>模式灵活性（schema-on-read）</li></ul><h3 id="规范化-vs-反规范化" tabindex="-1"><a class="header-anchor" href="#规范化-vs-反规范化"><span>规范化 vs 反规范化</span></a></h3><h4 id="规范化-normalization" tabindex="-1"><a class="header-anchor" href="#规范化-normalization"><span>规范化（Normalization）</span></a></h4><!--[--><div class="mermaid-actions"><button class="preview-button" title="preview"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1316 1024" fill="currentColor"><path d="M658.286 0C415.89 0 0 297.106 0 512c0 214.82 415.89 512 658.286 512 242.322 0 658.285-294.839 658.285-512S900.608 0 658.286 0zm0 877.714c-161.573 0-512-221.769-512-365.714 0-144.018 350.427-365.714 512-365.714 161.572 0 512 217.16 512 365.714s-350.428 365.714-512 365.714z"/><path d="M658.286 292.571a219.429 219.429 0 1 0 0 438.858 219.429 219.429 0 0 0 0-438.858zm0 292.572a73.143 73.143 0 1 1 0-146.286 73.143 73.143 0 0 1 0 146.286z"/></svg></button><button class="download-button" title="download"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" fill="currentColor"><path d="M828.976 894.125H190.189c-70.55 0-127.754-57.185-127.754-127.753V606.674c0-17.634 14.31-31.933 31.933-31.933h63.889c17.634 0 31.932 14.299 31.932 31.933v95.822c0 35.282 28.596 63.877 63.877 63.877h511.033c35.281 0 63.877-28.595 63.877-63.877v-95.822c0-17.634 14.298-31.933 31.943-31.933h63.878c17.635 0 31.933 14.299 31.933 31.933v159.7c0 70.566-57.191 127.751-127.754 127.751zM249.939 267.51c12.921-12.92 33.885-12.92 46.807 0l148.97 148.972V94.893c0-17.634 14.302-31.947 31.934-31.947h63.876c17.638 0 31.946 14.313 31.946 31.947v321.589l148.97-148.972c12.922-12.92 33.876-12.92 46.797 0l46.814 46.818c12.922 12.922 12.922 33.874 0 46.807L552.261 624.93c-1.14 1.138-21.664 13.684-42.315 13.693-20.877.01-41.88-12.542-43.021-13.693L203.122 361.135c-12.923-12.934-12.923-33.885 0-46.807l46.817-46.818z"/></svg></button></div><div class="mermaid-wrapper"><div class="loading-icon-wrapper mermaid-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!--]--><h4 id="反规范化-denormalization" tabindex="-1"><a class="header-anchor" href="#反规范化-denormalization"><span>反规范化（Denormalization）</span></a></h4><!--[--><div class="mermaid-actions"><button class="preview-button" title="preview"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1316 1024" fill="currentColor"><path d="M658.286 0C415.89 0 0 297.106 0 512c0 214.82 415.89 512 658.286 512 242.322 0 658.285-294.839 658.285-512S900.608 0 658.286 0zm0 877.714c-161.573 0-512-221.769-512-365.714 0-144.018 350.427-365.714 512-365.714 161.572 0 512 217.16 512 365.714s-350.428 365.714-512 365.714z"/><path d="M658.286 292.571a219.429 219.429 0 1 0 0 438.858 219.429 219.429 0 0 0 0-438.858zm0 292.572a73.143 73.143 0 1 1 0-146.286 73.143 73.143 0 0 1 0 146.286z"/></svg></button><button class="download-button" title="download"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" fill="currentColor"><path d="M828.976 894.125H190.189c-70.55 0-127.754-57.185-127.754-127.753V606.674c0-17.634 14.31-31.933 31.933-31.933h63.889c17.634 0 31.932 14.299 31.932 31.933v95.822c0 35.282 28.596 63.877 63.877 63.877h511.033c35.281 0 63.877-28.595 63.877-63.877v-95.822c0-17.634 14.298-31.933 31.943-31.933h63.878c17.635 0 31.933 14.299 31.933 31.933v159.7c0 70.566-57.191 127.751-127.754 127.751zM249.939 267.51c12.921-12.92 33.885-12.92 46.807 0l148.97 148.972V94.893c0-17.634 14.302-31.947 31.934-31.947h63.876c17.638 0 31.946 14.313 31.946 31.947v321.589l148.97-148.972c12.922-12.92 33.876-12.92 46.797 0l46.814 46.818c12.922 12.922 12.922 33.874 0 46.807L552.261 624.93c-1.14 1.138-21.664 13.684-42.315 13.693-20.877.01-41.88-12.542-43.021-13.693L203.122 361.135c-12.923-12.934-12.923-33.885 0-46.807l46.817-46.818z"/></svg></button></div><div class="mermaid-wrapper"><div class="loading-icon-wrapper mermaid-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!--]--><h3 id="模式灵活性对比" tabindex="-1"><a class="header-anchor" href="#模式灵活性对比"><span>模式灵活性对比</span></a></h3><table><thead><tr><th>特性</th><th>Schema-on-Write（关系型）</th><th>Schema-on-Read（文档型）</th></tr></thead><tbody><tr><td>模式定义</td><td>数据库强制执行</td><td>应用代码隐式处理</td></tr><tr><td>数据验证</td><td>写入时验证</td><td>读取时验证</td></tr><tr><td>灵活性</td><td>较低</td><td>较高</td></tr><tr><td>适用场景</td><td>结构稳定的数据</td><td>异构数据、频繁变化的结构</td></tr><tr><td>类比</td><td>静态类型语言</td><td>动态类型语言</td></tr></tbody></table><h2 id="图数据模型" tabindex="-1"><a class="header-anchor" href="#图数据模型"><span>图数据模型</span></a></h2><p>当多对多关系非常普遍时，图模型成为自然选择。</p><h3 id="图的基本组成" tabindex="-1"><a class="header-anchor" href="#图的基本组成"><span>图的基本组成</span></a></h3><!--[--><div class="mermaid-actions"><button class="preview-button" title="preview"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1316 1024" fill="currentColor"><path d="M658.286 0C415.89 0 0 297.106 0 512c0 214.82 415.89 512 658.286 512 242.322 0 658.285-294.839 658.285-512S900.608 0 658.286 0zm0 877.714c-161.573 0-512-221.769-512-365.714 0-144.018 350.427-365.714 512-365.714 161.572 0 512 217.16 512 365.714s-350.428 365.714-512 365.714z"/><path d="M658.286 292.571a219.429 219.429 0 1 0 0 438.858 219.429 219.429 0 0 0 0-438.858zm0 292.572a73.143 73.143 0 1 1 0-146.286 73.143 73.143 0 0 1 0 146.286z"/></svg></button><button class="download-button" title="download"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" fill="currentColor"><path d="M828.976 894.125H190.189c-70.55 0-127.754-57.185-127.754-127.753V606.674c0-17.634 14.31-31.933 31.933-31.933h63.889c17.634 0 31.932 14.299 31.932 31.933v95.822c0 35.282 28.596 63.877 63.877 63.877h511.033c35.281 0 63.877-28.595 63.877-63.877v-95.822c0-17.634 14.298-31.933 31.943-31.933h63.878c17.635 0 31.933 14.299 31.933 31.933v159.7c0 70.566-57.191 127.751-127.754 127.751zM249.939 267.51c12.921-12.92 33.885-12.92 46.807 0l148.97 148.972V94.893c0-17.634 14.302-31.947 31.934-31.947h63.876c17.638 0 31.946 14.313 31.946 31.947v321.589l148.97-148.972c12.922-12.92 33.876-12.92 46.797 0l46.814 46.818c12.922 12.922 12.922 33.874 0 46.807L552.261 624.93c-1.14 1.138-21.664 13.684-42.315 13.693-20.877.01-41.88-12.542-43.021-13.693L203.122 361.135c-12.923-12.934-12.923-33.885 0-46.807l46.817-46.818z"/></svg></button></div><div class="mermaid-wrapper"><div class="loading-icon-wrapper mermaid-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!--]--><p><strong>示例：社交网络图</strong></p><!--[--><div class="mermaid-actions"><button class="preview-button" title="preview"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1316 1024" fill="currentColor"><path d="M658.286 0C415.89 0 0 297.106 0 512c0 214.82 415.89 512 658.286 512 242.322 0 658.285-294.839 658.285-512S900.608 0 658.286 0zm0 877.714c-161.573 0-512-221.769-512-365.714 0-144.018 350.427-365.714 512-365.714 161.572 0 512 217.16 512 365.714s-350.428 365.714-512 365.714z"/><path d="M658.286 292.571a219.429 219.429 0 1 0 0 438.858 219.429 219.429 0 0 0 0-438.858zm0 292.572a73.143 73.143 0 1 1 0-146.286 73.143 73.143 0 0 1 0 146.286z"/></svg></button><button class="download-button" title="download"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" fill="currentColor"><path d="M828.976 894.125H190.189c-70.55 0-127.754-57.185-127.754-127.753V606.674c0-17.634 14.31-31.933 31.933-31.933h63.889c17.634 0 31.932 14.299 31.932 31.933v95.822c0 35.282 28.596 63.877 63.877 63.877h511.033c35.281 0 63.877-28.595 63.877-63.877v-95.822c0-17.634 14.298-31.933 31.943-31.933h63.878c17.635 0 31.933 14.299 31.933 31.933v159.7c0 70.566-57.191 127.751-127.754 127.751zM249.939 267.51c12.921-12.92 33.885-12.92 46.807 0l148.97 148.972V94.893c0-17.634 14.302-31.947 31.934-31.947h63.876c17.638 0 31.946 14.313 31.946 31.947v321.589l148.97-148.972c12.922-12.92 33.876-12.92 46.797 0l46.814 46.818c12.922 12.922 12.922 33.874 0 46.807L552.261 624.93c-1.14 1.138-21.664 13.684-42.315 13.693-20.877.01-41.88-12.542-43.021-13.693L203.122 361.135c-12.923-12.934-12.923-33.885 0-46.807l46.817-46.818z"/></svg></button></div><div class="mermaid-wrapper"><div class="loading-icon-wrapper mermaid-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!--]--><h3 id="属性图示例" tabindex="-1"><a class="header-anchor" href="#属性图示例"><span>属性图示例</span></a></h3><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>顶点：</span></span>
<span class="line"><span>(person:Person {name: &quot;张三&quot;, age: 30})</span></span>
<span class="line"><span>(location:Location {name: &quot;北京&quot;, type: &quot;city&quot;})</span></span>
<span class="line"><span></span></span>
<span class="line"><span>边：</span></span>
<span class="line"><span>(person) -[:LIVES_IN]-&gt; (location)</span></span>
<span class="line"><span>(person) -[:BORN_IN]-&gt; (location)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="图查询语言对比" tabindex="-1"><a class="header-anchor" href="#图查询语言对比"><span>图查询语言对比</span></a></h3><h4 id="cypher-neo4j" tabindex="-1"><a class="header-anchor" href="#cypher-neo4j"><span>Cypher（Neo4j）</span></a></h4><div class="language-cypher line-numbers-mode" data-ext="cypher" data-title="cypher"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>MATCH (person:Person) -[:BORN_IN]-&gt; () -[:WITHIN*0..]-&gt; (us:Location {name:&#39;United States&#39;})</span></span>
<span class="line"><span>RETURN person.name</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>特点</strong>：</p><ul><li>使用箭头符号表示关系</li><li>模式匹配语法直观</li><li>支持可变长度路径（<code>*0..</code>）</li></ul><h4 id="sql-递归查询" tabindex="-1"><a class="header-anchor" href="#sql-递归查询"><span>SQL 递归查询</span></a></h4><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">WITH</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> RECURSIVE</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> in_usa(vertex_id) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">AS</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">  SELECT</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> vertex_id </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">FROM</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> vertices </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">WHERE</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> properties</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-&gt;&gt;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">name</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">United States</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">  UNION</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">  SELECT</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> edges</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">tail_vertex</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> FROM</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> edges</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    JOIN</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> in_usa </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">ON</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> edges</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">head_vertex</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> in_usa</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">vertex_id</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    WHERE</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> edges</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">label</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">within</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">SELECT</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> vertices</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">properties</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">-&gt;&gt;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">name</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">FROM</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> vertices</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">  JOIN</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> in_usa </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">ON</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> vertices</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">vertex_id</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> in_usa</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">vertex_id</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">WHERE</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> vertices</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">label</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Person</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>特点</strong>：</p><ul><li>使用递归 CTE</li><li>语法复杂</li><li>需要显式处理递归逻辑</li></ul><h4 id="sparql-rdf-三元组存储" tabindex="-1"><a class="header-anchor" href="#sparql-rdf-三元组存储"><span>SPARQL（RDF/三元组存储）</span></a></h4><div class="language-sparql line-numbers-mode" data-ext="sparql" data-title="sparql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>PREFIX : &lt;urn:example:&gt;</span></span>
<span class="line"><span>SELECT ?personName WHERE {</span></span>
<span class="line"><span>  ?person :name ?personName.</span></span>
<span class="line"><span>  ?person :bornIn / :within* ?location.</span></span>
<span class="line"><span>  ?location :name &quot;United States&quot;.</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>特点</strong>：</p><ul><li>基于主语-谓语-宾语三元组</li><li>路径查询使用 <code>/</code> 和 <code>*</code></li><li>语义网标准</li></ul><h4 id="datalog" tabindex="-1"><a class="header-anchor" href="#datalog"><span>Datalog</span></a></h4><div class="language-datalog line-numbers-mode" data-ext="datalog" data-title="datalog"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>within_recursive(Location, Name) :- name(Location, Name).</span></span>
<span class="line"><span>within_recursive(Location, Name) :- within(Location, Via),</span></span>
<span class="line"><span>                                     within_recursive(Via, Name).</span></span>
<span class="line"><span></span></span>
<span class="line"><span>born_in_usa(Person, Name) :- born_in(Person, Location),</span></span>
<span class="line"><span>                              within_recursive(Location, &#39;United States&#39;),</span></span>
<span class="line"><span>                              name(Person, Name).</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>特点</strong>：</p><ul><li>基于规则的逻辑编程</li><li>通过规则组合构建复杂查询</li><li>增量式定义查询逻辑</li></ul><h2 id="事件溯源与-cqrs" tabindex="-1"><a class="header-anchor" href="#事件溯源与-cqrs"><span>事件溯源与 CQRS</span></a></h2><h3 id="事件溯源-event-sourcing" tabindex="-1"><a class="header-anchor" href="#事件溯源-event-sourcing"><span>事件溯源（Event Sourcing）</span></a></h3><!--[--><div class="mermaid-actions"><button class="preview-button" title="preview"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1316 1024" fill="currentColor"><path d="M658.286 0C415.89 0 0 297.106 0 512c0 214.82 415.89 512 658.286 512 242.322 0 658.285-294.839 658.285-512S900.608 0 658.286 0zm0 877.714c-161.573 0-512-221.769-512-365.714 0-144.018 350.427-365.714 512-365.714 161.572 0 512 217.16 512 365.714s-350.428 365.714-512 365.714z"/><path d="M658.286 292.571a219.429 219.429 0 1 0 0 438.858 219.429 219.429 0 0 0 0-438.858zm0 292.572a73.143 73.143 0 1 1 0-146.286 73.143 73.143 0 0 1 0 146.286z"/></svg></button><button class="download-button" title="download"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" fill="currentColor"><path d="M828.976 894.125H190.189c-70.55 0-127.754-57.185-127.754-127.753V606.674c0-17.634 14.31-31.933 31.933-31.933h63.889c17.634 0 31.932 14.299 31.932 31.933v95.822c0 35.282 28.596 63.877 63.877 63.877h511.033c35.281 0 63.877-28.595 63.877-63.877v-95.822c0-17.634 14.298-31.933 31.943-31.933h63.878c17.635 0 31.933 14.299 31.933 31.933v159.7c0 70.566-57.191 127.751-127.754 127.751zM249.939 267.51c12.921-12.92 33.885-12.92 46.807 0l148.97 148.972V94.893c0-17.634 14.302-31.947 31.934-31.947h63.876c17.638 0 31.946 14.313 31.946 31.947v321.589l148.97-148.972c12.922-12.92 33.876-12.92 46.797 0l46.814 46.818c12.922 12.922 12.922 33.874 0 46.807L552.261 624.93c-1.14 1.138-21.664 13.684-42.315 13.693-20.877.01-41.88-12.542-43.021-13.693L203.122 361.135c-12.923-12.934-12.923-33.885 0-46.807l46.817-46.818z"/></svg></button></div><div class="mermaid-wrapper"><div class="loading-icon-wrapper mermaid-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!--]--><p><strong>优势</strong>：</p><ul><li>完整的审计日志</li><li>时间旅行调试</li><li>捕获用户意图</li><li>可重现的视图</li></ul><p><strong>挑战</strong>：</p><ul><li>外部数据处理</li><li>个人数据删除要求（GDPR）</li></ul><h3 id="cqrs-命令查询职责分离" tabindex="-1"><a class="header-anchor" href="#cqrs-命令查询职责分离"><span>CQRS（命令查询职责分离）</span></a></h3><!--[--><div class="mermaid-actions"><button class="preview-button" title="preview"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1316 1024" fill="currentColor"><path d="M658.286 0C415.89 0 0 297.106 0 512c0 214.82 415.89 512 658.286 512 242.322 0 658.285-294.839 658.285-512S900.608 0 658.286 0zm0 877.714c-161.573 0-512-221.769-512-365.714 0-144.018 350.427-365.714 512-365.714 161.572 0 512 217.16 512 365.714s-350.428 365.714-512 365.714z"/><path d="M658.286 292.571a219.429 219.429 0 1 0 0 438.858 219.429 219.429 0 0 0 0-438.858zm0 292.572a73.143 73.143 0 1 1 0-146.286 73.143 73.143 0 0 1 0 146.286z"/></svg></button><button class="download-button" title="download"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" fill="currentColor"><path d="M828.976 894.125H190.189c-70.55 0-127.754-57.185-127.754-127.753V606.674c0-17.634 14.31-31.933 31.933-31.933h63.889c17.634 0 31.932 14.299 31.932 31.933v95.822c0 35.282 28.596 63.877 63.877 63.877h511.033c35.281 0 63.877-28.595 63.877-63.877v-95.822c0-17.634 14.298-31.933 31.943-31.933h63.878c17.635 0 31.933 14.299 31.933 31.933v159.7c0 70.566-57.191 127.751-127.754 127.751zM249.939 267.51c12.921-12.92 33.885-12.92 46.807 0l148.97 148.972V94.893c0-17.634 14.302-31.947 31.934-31.947h63.876c17.638 0 31.946 14.313 31.946 31.947v321.589l148.97-148.972c12.922-12.92 33.876-12.92 46.797 0l46.814 46.818c12.922 12.922 12.922 33.874 0 46.807L552.261 624.93c-1.14 1.138-21.664 13.684-42.315 13.693-20.877.01-41.88-12.542-43.021-13.693L203.122 361.135c-12.923-12.934-12.923-33.885 0-46.807l46.817-46.818z"/></svg></button></div><div class="mermaid-wrapper"><div class="loading-icon-wrapper mermaid-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!--]--><p><strong>核心思想</strong>：</p><ul><li>分离写入和读取的数据表示</li><li>每个视图针对特定查询模式优化</li><li>从事件日志派生物化视图</li></ul><p><strong>优势</strong>：</p><ul><li>灵活的查询优化</li><li>易于添加新视图</li><li>系统演化更容易</li></ul><h2 id="数据框与数组" tabindex="-1"><a class="header-anchor" href="#数据框与数组"><span>数据框与数组</span></a></h2><h3 id="数据框-dataframe" tabindex="-1"><a class="header-anchor" href="#数据框-dataframe"><span>数据框（Dataframe）</span></a></h3><p>数据框是关系数据库与科学计算的桥梁：</p><table><thead><tr><th>特性</th><th>关系表</th><th>数据框</th></tr></thead><tbody><tr><td>结构</td><td>行和列</td><td>行和列</td></tr><tr><td>列数</td><td>通常较少</td><td>可达数百列</td></tr><tr><td>操作</td><td>SQL 查询</td><td>矩阵运算、统计分析</td></tr><tr><td>应用</td><td>业务数据处理</td><td>数据科学、机器学习</td></tr></tbody></table><h3 id="常见转换操作" tabindex="-1"><a class="header-anchor" href="#常见转换操作"><span>常见转换操作</span></a></h3><h4 id="透视-pivot" tabindex="-1"><a class="header-anchor" href="#透视-pivot"><span>透视（Pivot）</span></a></h4><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>原始数据：</span></span>
<span class="line"><span>user_id | metric | value</span></span>
<span class="line"><span>1       | age    | 30</span></span>
<span class="line"><span>1       | income | 50000</span></span>
<span class="line"><span>2       | age    | 25</span></span>
<span class="line"><span></span></span>
<span class="line"><span>透视后：</span></span>
<span class="line"><span>user_id | age | income</span></span>
<span class="line"><span>1       | 30  | 50000</span></span>
<span class="line"><span>2       | 25  | NULL</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="独热编码-one-hot-encoding" tabindex="-1"><a class="header-anchor" href="#独热编码-one-hot-encoding"><span>独热编码（One-Hot Encoding）</span></a></h4><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>原始数据：</span></span>
<span class="line"><span>user_id | category</span></span>
<span class="line"><span>1       | A</span></span>
<span class="line"><span>2       | B</span></span>
<span class="line"><span>3       | A</span></span>
<span class="line"><span></span></span>
<span class="line"><span>编码后：</span></span>
<span class="line"><span>user_id | category_A | category_B</span></span>
<span class="line"><span>1       | 1          | 0</span></span>
<span class="line"><span>2       | 0          | 1</span></span>
<span class="line"><span>3       | 1          | 0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="数据模型选择指南" tabindex="-1"><a class="header-anchor" href="#数据模型选择指南"><span>数据模型选择指南</span></a></h2><h3 id="决策树" tabindex="-1"><a class="header-anchor" href="#决策树"><span>决策树</span></a></h3><!--[--><div class="mermaid-actions"><button class="preview-button" title="preview"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1316 1024" fill="currentColor"><path d="M658.286 0C415.89 0 0 297.106 0 512c0 214.82 415.89 512 658.286 512 242.322 0 658.285-294.839 658.285-512S900.608 0 658.286 0zm0 877.714c-161.573 0-512-221.769-512-365.714 0-144.018 350.427-365.714 512-365.714 161.572 0 512 217.16 512 365.714s-350.428 365.714-512 365.714z"/><path d="M658.286 292.571a219.429 219.429 0 1 0 0 438.858 219.429 219.429 0 0 0 0-438.858zm0 292.572a73.143 73.143 0 1 1 0-146.286 73.143 73.143 0 0 1 0 146.286z"/></svg></button><button class="download-button" title="download"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" fill="currentColor"><path d="M828.976 894.125H190.189c-70.55 0-127.754-57.185-127.754-127.753V606.674c0-17.634 14.31-31.933 31.933-31.933h63.889c17.634 0 31.932 14.299 31.932 31.933v95.822c0 35.282 28.596 63.877 63.877 63.877h511.033c35.281 0 63.877-28.595 63.877-63.877v-95.822c0-17.634 14.298-31.933 31.943-31.933h63.878c17.635 0 31.933 14.299 31.933 31.933v159.7c0 70.566-57.191 127.751-127.754 127.751zM249.939 267.51c12.921-12.92 33.885-12.92 46.807 0l148.97 148.972V94.893c0-17.634 14.302-31.947 31.934-31.947h63.876c17.638 0 31.946 14.313 31.946 31.947v321.589l148.97-148.972c12.922-12.92 33.876-12.92 46.797 0l46.814 46.818c12.922 12.922 12.922 33.874 0 46.807L552.261 624.93c-1.14 1.138-21.664 13.684-42.315 13.693-20.877.01-41.88-12.542-43.021-13.693L203.122 361.135c-12.923-12.934-12.923-33.885 0-46.807l46.817-46.818z"/></svg></button></div><div class="mermaid-wrapper"><div class="loading-icon-wrapper mermaid-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!--]--><h3 id="关键考虑因素" tabindex="-1"><a class="header-anchor" href="#关键考虑因素"><span>关键考虑因素</span></a></h3><table><thead><tr><th>因素</th><th>问题</th></tr></thead><tbody><tr><td>数据结构</td><td>是树形、表格还是图形？</td></tr><tr><td>关系复杂度</td><td>多对多关系有多普遍？</td></tr><tr><td>查询模式</td><td>主要是点查询、聚合还是图遍历？</td></tr><tr><td>写入模式</td><td>高写入还是高读取？</td></tr><tr><td>模式演化</td><td>结构变化频率如何？</td></tr><tr><td>数据一致性</td><td>需要强一致性还是最终一致性？</td></tr></tbody></table><h3 id="混合策略" tabindex="-1"><a class="header-anchor" href="#混合策略"><span>混合策略</span></a></h3><p>现代数据库越来越支持多模型：</p><!--[--><div class="mermaid-actions"><button class="preview-button" title="preview"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1316 1024" fill="currentColor"><path d="M658.286 0C415.89 0 0 297.106 0 512c0 214.82 415.89 512 658.286 512 242.322 0 658.285-294.839 658.285-512S900.608 0 658.286 0zm0 877.714c-161.573 0-512-221.769-512-365.714 0-144.018 350.427-365.714 512-365.714 161.572 0 512 217.16 512 365.714s-350.428 365.714-512 365.714z"/><path d="M658.286 292.571a219.429 219.429 0 1 0 0 438.858 219.429 219.429 0 0 0 0-438.858zm0 292.572a73.143 73.143 0 1 1 0-146.286 73.143 73.143 0 0 1 0 146.286z"/></svg></button><button class="download-button" title="download"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" fill="currentColor"><path d="M828.976 894.125H190.189c-70.55 0-127.754-57.185-127.754-127.753V606.674c0-17.634 14.31-31.933 31.933-31.933h63.889c17.634 0 31.932 14.299 31.932 31.933v95.822c0 35.282 28.596 63.877 63.877 63.877h511.033c35.281 0 63.877-28.595 63.877-63.877v-95.822c0-17.634 14.298-31.933 31.943-31.933h63.878c17.635 0 31.933 14.299 31.933 31.933v159.7c0 70.566-57.191 127.751-127.754 127.751zM249.939 267.51c12.921-12.92 33.885-12.92 46.807 0l148.97 148.972V94.893c0-17.634 14.302-31.947 31.934-31.947h63.876c17.638 0 31.946 14.313 31.946 31.947v321.589l148.97-148.972c12.922-12.92 33.876-12.92 46.797 0l46.814 46.818c12.922 12.922 12.922 33.874 0 46.807L552.261 624.93c-1.14 1.138-21.664 13.684-42.315 13.693-20.877.01-41.88-12.542-43.021-13.693L203.122 361.135c-12.923-12.934-12.923-33.885 0-46.807l46.817-46.818z"/></svg></button></div><div class="mermaid-wrapper"><div class="loading-icon-wrapper mermaid-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!--]--><blockquote><p>一个模型可以模拟另一个模型，但结果往往很笨拙。选择合适的数据模型对系统成功至关重要。</p></blockquote><h2 id="核心原则" tabindex="-1"><a class="header-anchor" href="#核心原则"><span>核心原则</span></a></h2><ul><li>根据数据结构和查询模式选择模型</li><li>规范化与反规范化需权衡读写性能</li><li>Schema-on-read 提供灵活性，Schema-on-write 提供保证</li><li>一个模型可以模拟另一个，但选择合适的模型至关重要</li><li>现代数据库支持多模型，可针对不同部分选择最优方案</li></ul></div><!----><!----><!----></div></main><footer class="vp-doc-footer" data-v-94616537 data-v-76964c65><!--[--><!--]--><!----><div class="contributors" aria-label="Contributors" data-v-76964c65><span class="contributors-label" data-v-76964c65>贡献者: </span><span class="contributors-info" data-v-76964c65><!--[--><!--[--><span class="contributor" data-v-76964c65>aidenreed937</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" data-v-76964c65>Claude Opus 4.5</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" data-v-76964c65>Claude Sonnet 4.5</span><!----><!--]--><!--]--></span></div><nav class="prev-next" data-v-76964c65><div class="pager" data-v-76964c65><a class="vp-link no-icon link pager-link prev" href="/henry.github.io/ddia/ia4ww5f0/" data-v-76964c65 data-v-87b5717a><!--[--><span class="desc" data-v-76964c65>上一页</span><span class="title" data-v-76964c65>第2章 定义非功能性需求</span><!--]--><!----></a></div><div class="pager" data-v-76964c65><a class="vp-link no-icon link pager-link next" href="/henry.github.io/ddia/qoji05j0/" data-v-76964c65 data-v-87b5717a><!--[--><span class="desc" data-v-76964c65>下一页</span><span class="title" data-v-76964c65>第4章 存储与检索</span><!--]--><!----></a></div></nav></footer><!----><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!--]--><button type="button" class="vp-back-to-top" aria-label="back to top" data-v-6b855051 style="display:none;" data-v-41e7b746><span class="percent" data-allow-mismatch data-v-41e7b746>0%</span><span class="show icon vpi-back-to-top" data-v-41e7b746></span><svg aria-hidden="true" data-v-41e7b746><circle cx="50%" cy="50%" data-allow-mismatch style="stroke-dasharray:calc(0% - 12.566370614359172px) calc(314.1592653589793% - 12.566370614359172px);" data-v-41e7b746></circle></svg></button><footer class="vp-footer has-sidebar" vp-footer data-v-6b855051 data-v-5f4a75b0><!--[--><div class="container" data-v-5f4a75b0><p class="message" data-v-5f4a75b0>Powered by <a target="_blank" href="https://v2.vuepress.vuejs.org/">VuePress</a> & <a target="_blank" href="https://theme-plume.vuejs.press">vuepress-theme-plume</a></p><!----></div><!--]--></footer><!--[--><!--]--><!--]--></div><!----><!--]--><!--[--><!--]--><!--]--></div><script type="module" src="/henry.github.io/assets/app-BNwF3TyR.js" defer></script></body></html>